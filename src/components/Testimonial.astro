---
const reviews = [
  	{
    	name: "PatriGCC",
    	text: "Este hotel te ofrece una buena estadia si por ejemplo llegas por trabajo, como en mi caso; o si llegas con la familia de vacaciones. Si se animan a dar un chapuzon en la piscina, pues en agosto se siente algo de frio...seguro lo pasaran muy bien. Lo √∫nico malo del lugar es que no ofrece servicio de cafeteria y que la habitacion no incluye el desayuno. Pero cuenta con agua caliente y wifi gratis.",
  	},
  	{
    	name: "Oscar A",
    	text: "La parte externa es una calle un poco solitaria, los domingos hay feria del mercado, puedes salir con cuidado con tu veh√≠culo. Cobran 5% adicional pagando con tarjeta de Cr√©dito. La almohada es un poco alta y dura sugiero m√°s peque√±as. La relaci√≥n costo/beneficio me pareci√≥ un poco elevada, sugiero colocar precios algo mas competitivos.",
  	},
  	{
    	name: "Daniel C",
    	text: "Estuvimos un dia antes de navidad pero en esa ocacion la due√±a nos dio una doble terrible, ya luego la recepcionista de la tarde nos aconsejo otras habitaciones pues ibamos a volver dias despues, a nuestro regreso nos dieron una habitacion muy comoda para nosotros y nuestro peque√±o la 109 habitacion perfecta cama King size y otra de plaza y media, Televisor pantalla de 50, friobar, colchon de muy buena calidad.",
  	},
  	{
    	name: "Ivonne L",
    	text: "Como no hicimos reservaci√≥n ,estuvo bien ,el costo era bueno,las camas y el ba√±o, pero no sab√≠amos que no incluye desayuno,aunque no era problema al menos para nosotros , no se ubica en la v√≠a principal ,pero est√° a poquisimos metros de la plaza de armas,pero la noche que estuvimos hubo el terremoto en Arequipa el cual se sinti√≥ en Nazca muy pero muy fuerte,felizmente todo estuvo seguro en el lugar. Tambi√©n tiene estacionamiento en el interior lo cual fue importante para quedarnos aqu√≠.",
  	},
  	{
    	name: "AAI74",
    	text: "Due√±os muy agradables y pendiente de que est√©s agosto en el hotel, hotel limpio y muy c√≥modo,se preocupan bastante delos clientes los due√±os y de que la estancia sea, lo mas agradable posible.Precio y calidad muy bienes un hotel que recomiendo.",
  	},
  	{
    	name: "Fernando V",
    	text: "El Hotel se encuentra a una cuadra de la plaza de armas, donde hay restaurantes, y comercios en general. La habitaci√≥n que solicit√© era indivudual, era peque√±a, muy limpia, con agua caliente, tv y lo necesario. El hotel cuenta con piscina y puede uno solicitar el desayuno y pagarlo por separado",
  	},
  	{
    	name: "EstherArana",
    	text: "Nos alojamos solo una noche, no ten√≠amos reserva, pero encontramos cupo, eramos mi esposo y yo, nos dieron dos habitaciones a escoger, escogimos en el segundo piso, frente a la piscina, la habitaci√≥n amplia, muy limpia, la cama muy c√≥moda, aire acondicionado, el ba√±o impecable y amplio, muy amables las personas que atienden, cuenta con dos piscinas, para adultos y ni√±os, muy bellas plantas, lo malo, no sirven desayuno, pero se soluciona, el lugar, a pesar que esta cerca al mercado, no es ning√∫n inconveniente, un sitio muy seguro, a una cuadra de la Plaza de Armas, y del bulevar, lleno de restaurantes y negocios. Muy bueno y nada que envidiar a otros hoteles, sobre todo tienen buen precio, si dudarlo regreso a este hotel.",
  	},
  	{
    	name: "Oscardog16",
    	text: "Parec√≠a b√°sico, pero estaba limpio, espacioso y seguro. El hotel obviamente est√° invirtiendo dinero para mejorar su propiedad. La instalaci√≥n del ascensor estaba casi completa. El minibar en la habitaci√≥n era una ventaja inesperada. Intentamos reservar una propiedad m√°s cara, pero no ten√≠a vacante, as√≠ que reservamos una habitaci√≥n doble de lujo en el Bris Hotel. Durante nuestra estancia visitamos la propiedad m√°s cara. Nos alegr√≥ que reservamos el hotel Bris, ya que estaba en una zona mucho m√°s tranquila y mejor relaci√≥n calidad-precio a aproximadamente la mitad del precio de la propiedad m√°s cara",
  	},
  	{
    	name: "Alfonso C.",
    	text: "El hotel bastante aceptable en todos los sentidos, el personal muy amable, no hay queja en absoluto por esa parte, el cuarto tiene su ropero y tambi√©n tiene aire acondicionado, en la noche es muy tranquilo y se puede descansar muy bien. Ubicado a media cuadra de la plaza de armas, tiene parking incluido. El personal fue muy amable.",
  	},
  	{
    	name: "E Cordova",
    	text: "Estuve en verano por la ciudad de Nasca, me hosped√© y constat√© la excelente ubicaci√≥n del hotel, atenci√≥n cordial, amable y atento del pesonal; muy buena piscina y la cochera √°mplia y espaciosa para maniobras, sobre todo segura. De hecho, al regresar a Nasca, volver√© a hospedarme en el mismo hotel porque me ofrece lo que necesito: ubicaci√≥n c√©ntrica, seguridad, confort. Lo recomiendo.",
  	},
  	{
    	name: "Alan Wurman",
    	text: "Hola, soy Alan de los Cyberlocos. Nos quedamos en el Hotel Bris y realmente fue de las mejores experiencias del viaje, el desayuno delicioso, las piezas limpias, la cama super c√≥moda y las personas que trabajan ahi son un amor, nos ayudaron much√≠simo!. 100% recomendado",
  	},
  	{
    	name: "Valery Neyra",
    	text: "El hotel es bonito y tiene buena ubicaci√≥n, la atenci√≥n tambi√©n es buena. Limpio todo. Las s√°banas estaban muy desgastadas, se notaba que eran viejas. Cobran 5% adicional por pagar con tarjeta.",
  	},
  	{
    	name: "Cecilia Caldera",
    	text: "Hotel muy bonito, adem√°s de la atenci√≥n q dan en todo momento...desayuno sabroso...y las chicas q nos atendieron super amables Karla, Merry y Mar√≠a ...lo recomiendo ampliamente, exelente servicio",
  	},
  	{
    	name: "Manueal Llaguno",
    	text: "Buen hotel y muy cerca a la plaza. No todas las habitaciones tienen aire acondicionado, pero si hay disponibles te la cambian.",
  	},
  	{
    	name: "Alma Liliana",
    	text: "Tiene buena ubicaci√≥n por el centro de nasca, de la estaci√≥n de autobuses llegas caminando Las habitaciones muy c√≥modas y limpias,el lugar es muy agradable por su decoraci√≥n. No hay ruidos,puedes descansar c√≥modamente,lo recomiendo ampliamente, adem√°s el personal muy atento y educado nos guardaron nuestro equipaje para ir a un tour y nos dejaron pasar all√≠ la tarde en el √°rea del jard√≠n ya que nuestro autob√∫s sal√≠a de noche. Gracias x todo",
  	},
];
---
<section class="bg-[#f4ecec] py-16">
  	<div class="max-w-6xl mx-auto text-center px-6">
    	<h2 class="text-5xl gwendolyn-bold md:text-4xl font-[cursive] mb-12">
			Comentarios de hu√©spedes
		</h2>

    	<!-- Slider wrapper -->
    	<div class="relative overflow-hidden">
      		<!-- Slides container -->
      		<div id="testimonial-track" class="flex transition-transform duration-700 ease-in-out" data-length={reviews.length}>
				{reviews.map((r) => (
					<div class="w-full md:w-1/3 flex-shrink-0 px-6">
            			<p class="text-gray-700 leading-relaxed mb-6">{r.text.length > 190 ? r.text.substring(0, 190) + "..." : r.text}</p>
            			<span class="font-bold tracking-wide">{r.name}</span>
          			</div>
        		))}
      		</div>

      		<!-- Dots -->
      		<div id="testimonial-dots" class="flex justify-center mt-10 space-x-3">
        		{Array.from({ length: Math.ceil(reviews.length / 3) }).map((_, i) => (
          			<button class="w-2 h-2 rounded-full bg-gray-400" data-index={i}></button>
				))}
      		</div>
    	</div>
  	</div>
</section>

<!-- üëá Script en cliente (JS puro, sin acceso a "reviews") -->
<script>
	document.addEventListener("DOMContentLoaded", () => {
  		const track = document.getElementById("testimonial-track");

  		// Si no existe, salimos y evitamos que el resto del script corra
  		if (!track) return;

  		const trackEl = track as HTMLElement; // ‚úÖ ahora TS sabe que no es null
  		const dots = document.querySelectorAll<HTMLButtonElement>("#testimonial-dots [data-index]");

  		if (dots.length === 0) return;

  		const totalReviews = trackEl.children.length;
  		let index = 0;
  		let timer: ReturnType<typeof setInterval> | null = null;

  		function getItemsPerView(): number {
    		return window.innerWidth >= 768 ? 3 : 1;
  		}

  		function getTotalGroups(): number {
    		return Math.ceil(totalReviews / getItemsPerView());
  		}

  		function applyTransform() {
  			const itemsPerView = getItemsPerView();
  			const containerWidth = trackEl.parentElement ? trackEl.parentElement.clientWidth : 0;
  			trackEl.style.transform = `translateX(-${index * containerWidth}px)`;
		}

  		function updateDots() {
    		dots.forEach((dot, idx) => {
      			dot.classList.toggle("bg-gray-400", idx === index);
      			dot.classList.toggle("bg-gray-300", idx !== index);
    		});
  		}

  		function showSlide(i: number) {
    		const totalGroups = getTotalGroups();
    		index = ((i % totalGroups) + totalGroups) % totalGroups;
    		trackEl.style.transition = "transform 0.7s ease-in-out";
    		applyTransform();
    		updateDots();
  		}

  		function startAuto() {
    		stopAuto();
    		timer = setInterval(() => showSlide(index + 1), 5000);
  		}

  		function stopAuto() {
    		if (timer) clearInterval(timer);
  		}

  		dots.forEach((dot) => {
    		dot.addEventListener("click", () => {
      			const i = Number(dot.dataset.index || 0);
      			showSlide(i);
      			startAuto();
    		});
  		});

  		window.addEventListener("resize", () => {
    		const prev = trackEl.style.transition;
    		trackEl.style.transition = "none";
    		applyTransform();
    		void trackEl.offsetHeight;
    		trackEl.style.transition = prev;
  		});

  		showSlide(0);
  		startAuto();
	});
</script>