---
const images = [
  	"slide1.png",
  	"slide2.png",
  	"slide3.png",
];
---
<section class="relative w-full min-h-[100svh] sm:min-h-[95svh] md:min-h-[100dvh] overflow-hidden flex items-center">
  	<div id="hero-slider" class="absolute inset-0 w-full h-full">
    	{images.map((src, i) => (
      		<img src={src} alt="Bris Hotel" class={`absolute inset-0 w-full h-full object-cover transition-opacity duration-[1500ms] ease-in-out ${i === 0 ? "opacity-100" : "opacity-0"}`} data-index={i} />
    	))}
  	</div>

  	<div class="absolute inset-0 bg-gradient-to-b from-black/70 via-black/40 to-black/80 z-0"></div>

  	<div class="relative z-10 px-6 sm:px-10 md:px-20 lg:px-32 xl:px-48 w-full flex flex-col items-center sm:items-start justify-center text-center sm:text-left space-y-4">
    	<h1 class="font-kestrel text-5xl sm:text-5xl md:text-6xl lg:text-7xl text-white drop-shadow-[0_4px_10px_rgba(0,0,0,0.5)]">
      		Bris Hotel
    	</h1>

    	<p class="merriweather text-base sm:text-lg md:text-xl lg:text-2xl text-gray-200 leading-relaxed max-w-2xl drop-shadow-md">
      		Toma un descanso y disfruta de esta joya escondida.
    	</p>

    	<button class="hidden lg:inline-block merriweather mt-6 px-8 py-3 bg-[#759120] text-white rounded-full shadow-md hover:shadow-[#759120]/20 transition-transform duration-300 hover:scale-105">
			RESERVA AHORA
		</button>
  	</div>

  	<button id="prev" class="absolute left-5 top-1/2 -translate-y-1/2 bg-black/10 hover:bg-black/60 text-white p-3 rounded-full shadow-md hover:shadow-xl transition z-20">
    	<i class="fas fa-chevron-left text-xl"></i>
  	</button>

  	<button id="next" class="absolute right-5 top-1/2 -translate-y-1/2 bg-black/10 hover:bg-black/60 text-white p-3 rounded-full shadow-md hover:shadow-xl transition z-20">
    	<i class="fas fa-chevron-right text-xl"></i>
  	</button>

  	<div id="dots" class="absolute bottom-8 left-1/2 -translate-x-1/2 flex gap-3 z-20"></div>
</section>

<div id="booking"
  class="fixed inset-x-0 bottom-4 sm:bottom-6 md:bottom-8 mx-auto w-[92%] sm:w-[85%] md:w-full max-w-md md:max-w-2xl lg:max-w-xl 
  bg-white backdrop-blur-xl p-4 md:p-6 rounded-2xl shadow-2xl z-30 border border-white/40 
  hover:shadow-rose-200/30 transition-all duration-300 
  lg:absolute lg:left-auto lg:right-12 lg:bottom-0 lg:translate-x-0 lg:mx-0">
  
  <h2 class="font-kestrel text-2xl sm:text-3xl lg:text-4xl text-[#5a3d37] mb-3 text-center">
    Reserva tu escape a Nasca
  </h2>

  <form onsubmit="sendToWhatsApp(event)" class="flex flex-col sm:flex-row gap-3 justify-center lg:justify-start font-sans">
    <input type="date" id="checkin"
      class="border border-[#759120] rounded-xl px-3 py-2 text-[#5a3d37] w-full sm:w-1/3 
      focus:outline-none focus:ring-1 focus:ring-[#759120] text-sm" required />

    <input type="date" id="checkout"
      class="border border-[#759120] rounded-xl px-3 py-2 text-[#5a3d37] w-full sm:w-1/3 
      focus:outline-none focus:ring-1 focus:ring-[#759120] text-sm" required />

    <button type="submit"
      class="merriweather bg-[#759120] text-white px-6 py-2 rounded-xl uppercase tracking-wide 
      w-full sm:w-auto text-sm transition-transform duration-300 hover:scale-105 active:scale-95">
      Reservar
    </button>
  </form>
</div>

<script is:inline>
  	let current = 0;
  	const slides = document.querySelectorAll("#hero-slider img");
  	const total = slides.length;
  	const dotsContainer = document.getElementById("dots");

  	slides.forEach((_, i) => {
    	const dot = document.createElement("span");
    	dot.className = "w-3 h-3 rounded-full bg-white/60 hover:bg-white cursor-pointer transition";
    	dot.dataset.index = i;
    	dot.addEventListener("click", () => {
      		showSlide(i);
      		resetInterval();
    	});
    	dotsContainer.appendChild(dot);
  	});

  	function showSlide(index) {
    	slides.forEach((slide, i) => {
      		slide.classList.toggle("opacity-100", i === index);
      		slide.classList.toggle("opacity-0", i !== index);
    	});

    	dotsContainer.querySelectorAll("span").forEach((dot, i) => {
      		dot.classList.toggle("bg-[#759120]", i === index);
      		dot.classList.toggle("bg-white/60", i !== index);
      		dot.classList.toggle("scale-125", i === index);
    	});

    	current = index;
  	}

  	function nextSlide() {
    	showSlide((current + 1) % total);
  	}
  	
	function prevSlide() {
    	showSlide((current - 1 + total) % total);
  	}

  	document.getElementById("next").addEventListener("click", () => {
    	nextSlide();
    	resetInterval();
  	});
  	
	document.getElementById("prev").addEventListener("click", () => {
    	prevSlide();
    	resetInterval();
  	});

  	let interval = setInterval(() => nextSlide(), 6000);
  	function resetInterval() {
    	clearInterval(interval);
    	interval = setInterval(() => nextSlide(), 6000);
  	}

  	showSlide(0);

  	function sendToWhatsApp(event) {
    	event.preventDefault();
    	const phone = "51940948536";
    	const checkin = document.getElementById("checkin").value;
    	const checkout = document.getElementById("checkout").value;

    	const message = `Hola, quiero reservar una habitaciÃ³n en BrisHotel.%0AðŸ“… Check-in: ${checkin}%0AðŸ“… Check-out: ${checkout}`;
    	const url = `https://wa.me/${phone}?text=${message}`;
    	window.open(url, "_blank");
  	}
</script>