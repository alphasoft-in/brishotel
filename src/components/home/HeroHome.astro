---
import slide1 from "../../assets/images/slider/slide1.png";
import slide2 from "../../assets/images/slider/slide2.png";
import slide3 from "../../assets/images/slider/slide3.png";

const images = [slide1.src, slide2.src, slide3.src];
---

<section
	class="relative w-full min-h-[95svh] sm:min-h-[95svh] md:min-h-[95dvh] overflow-hidden flex items-center"
>
	<div id="hero-slider" class="absolute inset-0 w-full h-full">
		{
			images.map((src, i) => (
				<img
					src={src}
					alt="Bris Hotel"
					class={`absolute inset-0 w-full h-full object-cover transition-all duration-[2000ms] ease-in-out ken-burns ${i === 0 ? "opacity-100 active" : "opacity-0"}`}
					data-index={i}
				/>
			))
		}
	</div>

	<div
		class="absolute inset-0 bg-gradient-to-b from-black/70 via-black/40 to-black/80 z-0"
	>
	</div>

	<div
		class="relative z-10 px-6 sm:px-10 md:px-20 lg:px-32 xl:px-48 w-full flex flex-col items-center sm:items-start justify-center text-center sm:text-left space-y-4 pt-8 md:pt-0"
	>
		<h1
			class="font-kestrel text-4xl sm:text-5xl md:text-7xl text-white drop-shadow-[0_4px_10px_rgba(0,0,0,0.5)] leading-tight"
		>
			Bris Hotel
		</h1>

		<p
			class="merriweather text-xs sm:text-sm md:text-lg lg:text-xl text-gray-200 leading-relaxed max-w-xs sm:max-w-2xl drop-shadow-md"
		>
			Toma un descanso y disfruta de tu estancia
		</p>

		<button
			class="hidden lg:inline-flex items-center gap-2 merriweather mt-6 px-8 py-3 bg-[#759120] text-white rounded-full shadow-md hover:shadow-[#759120]/20 transition-transform duration-300 hover:scale-105 cursor-pointer"
		>
			<svg
				xmlns="http://www.w3.org/2000/svg"
				class="w-5 h-5"
				fill="none"
				viewBox="0 0 24 24"
				stroke="currentColor"
			>
				<path
					stroke-linecap="round"
					stroke-linejoin="round"
					stroke-width="2"
					d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
				></path>
			</svg>
			RESERVA AHORA
		</button>
	</div>

	<button
		id="prev"
		class="absolute left-2 md:left-5 top-1/2 -translate-y-1/2 bg-black/10 hover:bg-black/60 text-white p-2 md:p-3 rounded-full shadow-md hover:shadow-xl transition z-20"
	>
		<i class="fas fa-chevron-left text-sm md:text-xl"></i>
	</button>

	<button
		id="next"
		class="absolute right-2 md:right-5 top-1/2 -translate-y-1/2 bg-black/10 hover:bg-black/60 text-white p-2 md:p-3 rounded-full shadow-md hover:shadow-xl transition z-20"
	>
		<i class="fas fa-chevron-right text-sm md:text-xl"></i>
	</button>

	<div
		id="dots"
		class="absolute bottom-10 left-1/2 -translate-x-1/2 lg:left-32 lg:translate-x-0 flex gap-3 z-20"
	>
	</div>
</section>

<div
	id="booking"
	class="absolute bottom-6 md:bottom-8 lg:-bottom-10 lg:right-12 left-1/2 -translate-x-1/2 lg:left-auto lg:translate-x-0 w-[92%] sm:w-[85%] md:w-[90%] max-w-[350px] sm:max-w-md md:max-w-lg lg:max-w-xl bg-white/95 backdrop-blur-xl p-4 md:p-6 rounded-2xl shadow-[0_20px_50px_rgba(0,0,0,0.3)] z-30 border border-white/40 scroll-mt-24 reveal"
>
	<h2
		class="font-kestrel text-lg sm:text-2xl lg:text-3xl text-[#5a3d37] mb-1 text-center"
	>
		Reserva tu escape a Nasca
	</h2>
	<div class="w-10 h-0.5 bg-[#759120] mx-auto mb-4 md:mb-6 opacity-30"></div>
	<form
		onsubmit="sendToWhatsApp(event)"
		class="flex flex-col md:flex-row gap-3 md:gap-4 justify-center lg:justify-start items-stretch md:items-end"
	>
		<!-- Columna de Check-In -->
		<div class="relative w-full md:w-1/3 flex flex-col">
			<label
				class="text-[9px] md:text-[10px] uppercase tracking-widest font-bold text-[#5a3d37]/60 mb-0.5 md:mb-1"
				for="checkin">Check-In</label
			>
			<input
				type="date"
				id="checkin"
				class="border border-gray-200 rounded-xl px-3 py-1.5 md:py-2.5 text-[#5a3d37] w-full bg-white/50 focus:bg-white focus:ring-2 focus:ring-[#759120]/20 focus:border-[#759120] transition-all outline-none text-xs md:text-sm"
				required
			/>
		</div>

		<!-- Columna de Check-Out -->
		<div class="relative w-full md:w-1/3 flex flex-col">
			<label
				class="text-[9px] md:text-[10px] uppercase tracking-widest font-bold text-[#5a3d37]/60 mb-0.5 md:mb-1"
				for="checkout">Check-Out</label
			>
			<input
				type="date"
				id="checkout"
				class="border border-gray-200 rounded-xl px-3 py-1.5 md:py-2.5 text-[#5a3d37] w-full bg-white/50 focus:bg-white focus:ring-2 focus:ring-[#759120]/20 focus:border-[#759120] transition-all outline-none text-xs md:text-sm"
				required
			/>
		</div>

		<!-- Botón de reserva -->
		<button
			type="submit"
			class="inline-flex items-center justify-center gap-2 merriweather bg-[#759120] hover:bg-[#5a7018] text-white px-6 py-2 md:py-2.5 rounded-xl uppercase tracking-widest font-bold w-full md:w-auto text-[10px] md:text-xs transition-all duration-300 hover:shadow-lg hover:shadow-[#759120]/30 active:scale-95 cursor-pointer h-10 md:h-[42px]"
		>
			<svg
				xmlns="http://www.w3.org/2000/svg"
				class="w-4 h-4"
				fill="none"
				viewBox="0 0 24 24"
				stroke="currentColor"
			>
				<path
					stroke-linecap="round"
					stroke-linejoin="round"
					stroke-width="2"
					d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
				></path>
			</svg>
			Reservar
		</button>
	</form>
</div>

<style>
	.ken-burns {
		transform: scale(1);
		transition:
			transform 10s linear,
			opacity 1.5s ease-in-out;
	}
	.ken-burns.active {
		transform: scale(1.1);
	}
</style>

<script is:inline>
	let current = 0;
	const slides = document.querySelectorAll("#hero-slider img");
	const total = slides.length;
	const dotsContainer = document.getElementById("dots");

	slides.forEach((_, i) => {
		const dot = document.createElement("span");
		dot.className =
			"w-3 h-3 rounded-full bg-white/60 hover:bg-white cursor-pointer transition";
		dot.dataset.index = i;
		dot.addEventListener("click", () => {
			showSlide(i);
			resetInterval();
		});
		dotsContainer.appendChild(dot);
	});

	function showSlide(index) {
		slides.forEach((slide, i) => {
			slide.classList.toggle("opacity-100", i === index);
			slide.classList.toggle("opacity-0", i !== index);
			slide.classList.toggle("active", i === index);
		});

		dotsContainer.querySelectorAll("span").forEach((dot, i) => {
			dot.classList.toggle("bg-[#759120]", i === index);
			dot.classList.toggle("bg-white/60", i !== index);
			dot.classList.toggle("scale-125", i === index);
		});

		current = index;
	}

	function nextSlide() {
		showSlide((current + 1) % total);
	}

	function prevSlide() {
		showSlide((current - 1 + total) % total);
	}

	document.getElementById("next").addEventListener("click", () => {
		nextSlide();
		resetInterval();
	});

	document.getElementById("prev").addEventListener("click", () => {
		prevSlide();
		resetInterval();
	});

	let interval = setInterval(() => nextSlide(), 6000);
	function resetInterval() {
		clearInterval(interval);
		interval = setInterval(() => nextSlide(), 6000);
	}

	showSlide(0);

	function sendToWhatsApp(event) {
		event.preventDefault();
		const phone = "51940948536";

		const checkin = document.getElementById("checkin").value;
		const checkout = document.getElementById("checkout").value;

		function formatDate(date) {
			const d = new Date(date);
			const day = String(d.getDate()).padStart(2, "0");
			const month = String(d.getMonth() + 1).padStart(2, "0");
			const year = d.getFullYear();
			return `${day}/${month}/${year}`;
		}

		const formattedCheckin = formatDate(checkin);
		const formattedCheckout = formatDate(checkout);

		const message = `Hola, quiero reservar una habitación en BrisHotel.%0A Check-in: ${formattedCheckin}%0A Check-out: ${formattedCheckout}`;

		const url = `https://wa.me/${phone}?text=${message}`;

		window.open(url, "_blank");
	}
</script>
