---
import logo from "../../assets/images/logo-white.png";
---

<nav
	id="navbar"
	class="w-full bg-[#5a3d37] fixed top-0 left-0 z-50 transition-all duration-500"
>
	<div class="mx-auto max-w-full px-4 py-2 md:py-4">
		<div class="flex items-center justify-between">
			<button
				type="button"
				aria-label="Menu"
				id="menu-toggle"
				class="flex flex-col gap-1.5 p-2 rounded-xl border border-transparent hover:border-white/20 transition"
			>
				<span class="block h-0.5 w-6 bg-white"></span>
				<span class="block h-0.5 w-6 bg-white"></span>
				<span class="block h-0.5 w-6 bg-white"></span>
			</button>

			<div class="flex-1 flex justify-center px-2">
				<a href="/" class="flex items-center justify-center">
					<img
						src={logo.src}
						alt="BrisHotel Logo"
						class="h-7 sm:h-9 md:h-12 w-auto object-contain"
					/>
				</a>
			</div>

			<div class="flex items-center gap-3">
				<a
					href="tel:940948536"
					class="hidden sm:flex items-center gap-2 text-white hover:text-[#f8af14] transition"
				>
					<svg
						xmlns="http://www.w3.org/2000/svg"
						class="h-5 w-5"
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M3 5a2 2 0 012-2h2.28a1 1 0 01.948.684l1.517 4.55a1 1 0 01-.272 1.023l-1.2 1.2a16 16 0 007.071 7.071l1.2-1.2a1 1 0 011.023-.272l4.55 1.517a1 1 0 01.684.948V19a2 2 0 01-2 2h-1C9.163 21 3 14.837 3 7V5z"
						></path>
					</svg>
					<span class="merriweather text-md font-medium">
						+51 940 948 536
					</span>
				</a>

				<a
					href="tel:+51940948536"
					class="md:hidden inline-flex items-center justify-center p-2 rounded-xl bg-[#5a3d37] text-white active:scale-95 transition-all duration-300 shadow-sm border border-white/10"
					aria-label="Call +51 940 948 536"
				>
					<i class="fa-solid fa-phone text-sm"></i>
				</a>

				<a
					href="#booking"
					class="hidden md:inline-flex merriweather items-center justify-center rounded-xl px-4 py-2 text-xs sm:text-sm font-bold tracking-widest border border-white/30 bg-white/10 text-white hover:bg-white hover:text-[#5a3d37] transition-all duration-300 ease-in-out"
				>
					RESERVA AHORA
				</a>
			</div>
		</div>
	</div>
</nav>

<div
	id="menu-canvas"
	class="fixed inset-y-0 left-0 w-[85vw] max-w-[320px] bg-white shadow-2xl transform -translate-x-full transition-all duration-[600ms] ease-[cubic-bezier(0.23,1,0.32,1)] z-50 opacity-0"
>
	<div class="relative h-full flex flex-col p-6">
		<button
			id="menu-close"
			class="absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 transition"
			aria-label="Cerrar menú"
		>
			<svg
				xmlns="http://www.w3.org/2000/svg"
				class="h-6 w-6 text-gray-800"
				fill="none"
				viewBox="0 0 24 24"
				stroke="currentColor"
			>
				<path
					stroke-linecap="round"
					stroke-linejoin="round"
					stroke-width="2"
					d="M6 18L18 6M6 6l12 12"></path>
			</svg>
		</button>

		<div class="mb-8">
			<span class="text-xl font-bold tracking-wider text-gray-900"></span>
		</div>

		<nav
			id="menu-nav"
			class="flex-1 space-y-2 text-xl merriweather divide-y divide-gray-50"
		>
			<a
				href="/"
				class="menu-item block py-3 text-[#5a3d37] hover:text-[#759120] transition-all duration-700 transform translate-y-6 opacity-0"
				>Inicio</a
			>
			<a
				href="/rooms"
				class="menu-item block py-3 text-[#5a3d37] hover:text-[#759120] transition-all duration-700 transform translate-y-6 opacity-0"
				>Habitaciones</a
			>
			<a
				href="/restaurant"
				class="menu-item block py-3 text-[#5a3d37] hover:text-[#759120] transition-all duration-700 transform translate-y-6 opacity-0"
				>Restaurant</a
			>

			<div
				class="pt-4 menu-item transform translate-y-6 opacity-0 transition-all duration-700"
			>
				<button
					id="submenu-toggle"
					class="w-full flex justify-between items-center py-3 text-[#5a3d37] hover:text-[#759120] transition-all"
				>
					Galería
					<svg
						id="submenu-icon"
						xmlns="http://www.w3.org/2000/svg"
						class="h-5 w-5 transition-transform"
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M19 9l-7 7-7-7"></path>
					</svg>
				</button>
				<div
					id="submenu"
					class="ml-4 space-y-3 max-h-0 opacity-0 overflow-hidden transition-all duration-[800ms] ease-[cubic-bezier(0.23,1,0.32,1)]"
				>
					<a
						href="/gallery-rooms"
						class="submenu-item block text-sm text-gray-400 hover:text-[#759120] transition-all duration-700 transform translate-y-3 opacity-0"
						>Habitaciones</a
					>
					<a
						href="/gallery-restaurant"
						class="submenu-item block text-sm text-gray-400 hover:text-[#759120] transition-all duration-700 transform translate-y-3 opacity-0"
						>Restaurant</a
					>
					<a
						href="/gallery-activities"
						class="submenu-item block text-sm text-gray-400 hover:text-[#759120] transition-all duration-700 transform translate-y-3 opacity-0"
						>Actividades</a
					>
				</div>
			</div>

			<a
				href="/about"
				class="menu-item block py-3 text-[#5a3d37] hover:text-[#759120] transition-all duration-700 transform translate-y-6 opacity-0"
				>Nosotros</a
			>
			<a
				href="/contact"
				class="menu-item block py-3 text-[#5a3d37] hover:text-[#759120] transition-all duration-700 transform translate-y-6 opacity-0"
				>Contáctanos</a
			>
		</nav>
	</div>
</div>

<div
	id="menu-overlay"
	class="fixed inset-0 bg-black/50 backdrop-blur-md opacity-0 pointer-events-none z-40 transition-all duration-[600ms] ease-out"
>
</div>

<script>
	const toggleBtn = document.getElementById("menu-toggle");
	const closeBtn = document.getElementById("menu-close");
	const canvas = document.getElementById("menu-canvas");
	const overlay = document.getElementById("menu-overlay");
	const submenuToggle = document.getElementById("submenu-toggle");
	const submenu = document.getElementById("submenu");
	const submenuIcon = document.getElementById("submenu-icon");

	function closeMenu() {
		canvas?.classList.add("-translate-x-full", "opacity-0");
		canvas?.classList.remove("translate-x-0", "opacity-100");
		overlay?.classList.add("opacity-0", "pointer-events-none");
		overlay?.classList.remove("opacity-100", "pointer-events-auto");

		document.querySelectorAll(".menu-item").forEach((item) => {
			item.classList.add("translate-y-6", "opacity-0");
			item.classList.remove("translate-y-0", "opacity-100");
		});
	}

	toggleBtn?.addEventListener("click", () => {
		canvas?.classList.remove("-translate-x-full", "opacity-0");
		canvas?.classList.add("translate-x-0", "opacity-100");
		overlay?.classList.remove("opacity-0", "pointer-events-none");
		overlay?.classList.add("opacity-100", "pointer-events-auto");

		setTimeout(() => {
			document.querySelectorAll(".menu-item").forEach((item, i) => {
				setTimeout(() => {
					item.classList.remove("translate-y-6", "opacity-0");
					item.classList.add("translate-y-0", "opacity-100");
				}, i * 60);
			});
		}, 300);
	});

	closeBtn?.addEventListener("click", closeMenu);
	overlay?.addEventListener("click", closeMenu);

	submenuToggle?.addEventListener("click", () => {
		const isOpen =
			submenu &&
			submenu.style.maxHeight !== "0px" &&
			submenu.style.maxHeight !== "";

		if (isOpen) {
			// Cerrar con suavidad
			if (submenu) {
				submenu.style.maxHeight = "0px";
				submenu.classList.add("opacity-0");
				submenu.classList.remove("opacity-100", "mt-4");
			}
			document.querySelectorAll(".submenu-item").forEach((item) => {
				item.classList.add("translate-y-3", "opacity-0");
				item.classList.remove("translate-y-0", "opacity-100");
			});
		} else {
			// Abrir con suavidad
			if (submenu) {
				submenu.classList.remove("opacity-0");
				submenu.classList.add("opacity-100", "mt-4");
				submenu.style.maxHeight = submenu.scrollHeight + "px";
			}
			setTimeout(() => {
				document
					.querySelectorAll(".submenu-item")
					.forEach((item, i) => {
						setTimeout(() => {
							item.classList.remove("translate-y-3", "opacity-0");
							item.classList.add("translate-y-0", "opacity-100");
						}, i * 80);
					});
			}, 150);
		}

		submenuIcon?.classList.toggle("rotate-180");
	});

	// Navbar scroll effect
	const navbar = document.getElementById("navbar");
	window.addEventListener("scroll", () => {
		if (window.scrollY > 50) {
			navbar?.classList.add(
				"sm:backdrop-blur-md",
				"sm:bg-[#5a3d37]/90",
				"py-2",
				"shadow-lg",
			);
			navbar?.classList.remove("py-4");
		} else {
			navbar?.classList.remove(
				"sm:backdrop-blur-md",
				"sm:bg-[#5a3d37]/90",
				"py-2",
				"shadow-lg",
			);
			navbar?.classList.add("py-4");
		}
	});
</script>
